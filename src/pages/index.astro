---
import Layout from '../layouts/layout.astro';

//  CAMBIA ESTO POR EL ID DE TU VIDEO DE YOUTUBE (Ej: dQw4w9WgXcQ)
const VIDEO_ID = "Puw2GJrfi4M"; 
---

<Layout title="Bienvenidos">

    <!-- 1. CAPA DE VIDEO DE FONDO -->
    <div id="home-video-wrapper">
        <!-- El video -->
        <div id="youtube-bg" data-id={VIDEO_ID}></div>
        <!-- Una capa oscura encima para que el texto blanco se lea bien -->
        <div class="overlay-oscura"></div>
    </div>
    
    <!-- 2. CONTENIDO PRINCIPAL (Centrado) -->
    <div class="hero-content">
        <h1 class="hero-title">KONTRAST #6</h1>
        <p class="hero-dates">Del 10 al 19 de Abril</p>
        
        <br><br>
        
        <a href="/programacion" class="btn-entradas btn-hero">VER PROGRAMACIN COMPLETA</a>
    </div>

</Layout>

<style>
    /* --- ESTRUCTURA DEL VIDEO DE FONDO --- */
    #home-video-wrapper {
        position: fixed; /* Fijo al fondo */
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 0; /* Detr谩s de todo */
        overflow: hidden;
        background: black; /* Fondo negro por si tarda en cargar */
    }

    /* ESTILOS DEL IFRAME (El video real) */
    /* Usamos :global() porque el iframe lo crea YouTube despu茅s */
    :global(iframe#youtube-bg) {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -40%);
        
        /* TRUCO MATEMTICO "COVER" (16:9) */
        width: 100vw; 
        height: 56.25vw; /* Relaci贸n 16:9 basada en ancho */
        min-height: 100vh;
        min-width: 177.77vh; /* Relaci贸n 16:9 basada en alto */
        
        /* FUERZA BRUTA: */
        max-width: none !important; /* Vital para que no se encoja */
        max-height: none !important;
        pointer-events: none; /* Nadie puede tocar el video */
    }

    /* Capa oscura para legibilidad */
    .overlay-oscura {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5); /* Oscuridad al 50% */
        z-index: 1;
        pointer-events: none; /* Dejamos pasar clicks a lo de abajo si hiciera falta */
    }

    /* --- ESTILOS DEL CONTENIDO (TEXTOS) --- */
    .hero-content {
        position: relative;
        z-index: 10; /* Encima del video */
        height: 85vh; /* Ocupa casi toda la pantalla */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: white; /* Texto blanco obligatorio sobre video */
        padding: 0 20px;
    }

    .hero-title {
        font-size: 5rem; /* T铆tulo gigante */
        font-weight: 900;
        margin: 0;
        line-height: 1;
        text-shadow: 0 4px 20px rgba(0,0,0,0.5); /* Sombra para resaltar */
        letter-spacing: -2px;
    }

    .hero-dates {
        font-size: 2rem;
        font-weight: 300;
        margin-top: 20px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }

    /* Bot贸n espec铆fico para la home */
    .btn-hero {
        background-color: var(--c-rojo); 
        color: white !important;
        padding: 15px 40px;
        font-size: 1.2rem;
        border-radius: 50px;
        font-weight: 800;
        text-transform: uppercase;
        margin-top: 40px;
        transition: transform 0.2s, background 0.2s;
        box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }
    
    .btn-hero:hover {
        background-color: white;
        color: black !important;
        transform: scale(1.05);
    }

    /* Adaptaci贸n M贸vil */
    @media (max-width: 768px) {
        .hero-title { font-size: 3rem; }
        .hero-dates { font-size: 1.2rem; }
    }
</style>

<!-- SCRIPT YOUTUBE (Copia exacta de la l贸gica de fondo) -->
<script>
    var player;
    const playerDiv = document.getElementById('youtube-bg');
    const videoId = playerDiv ? playerDiv.getAttribute('data-id') : null;

    if (videoId) {
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        window.onYouTubeIframeAPIReady = function() {
            player = new YT.Player('youtube-bg', {
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,
                    'controls': 0,
                    'disablekb': 1,
                    'fs': 0,
                    'mute': 1,      // SILENCIO OBLIGATORIO PARA AUTOPLAY
                    'loop': 1,
                    'playlist': videoId,
                    'playsinline': 1,
                    'rel': 0,
                    'showinfo': 0,
                    'modestbranding': 1
                },
                events: {
                    'onReady': function(e) {
                        e.target.playVideo();
                    }
                }
            });
        };
    }
</script>